<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutorial - Prashanth Vangari</title>
    <link rel="stylesheet" href="../styles/style.css">
</head>

<body>

    <!-- Header placeholder -->
    <div id="header"></div>

    <main class="tutorial-main">
        <article class="tutorial-content">
            <!-- Tutorial Header -->
            <div class="tutorial-header">
                <h1 id="tutorial-title">Tutorial Title</h1>
                <p class="tutorial-meta">
                    <span class="meta-item" id="tutorial-date">Published: <span></span></span>
                    <span class="meta-item" id="tutorial-category">Category: <span></span></span>
                    <span class="meta-item" id="tutorial-time">Reading Time: <span></span></span>
                </p>
            </div>

            <!-- YOUR CONTENT GOES HERE - Just write sections below -->
            <div id="tutorial-content">
                <!-- 
                    OPTION 1: Use the simple format below (recommended)
                    OPTION 2: Write full HTML sections if you need more control
                -->
            </div>

            <!-- Navigation (Auto-generated) -->
            <div id="tutorial-navigation"></div>

        </article>
    </main>

    <!-- Footer placeholder -->
    <div id="footer"></div>

    <!-- Scripts -->
    <script src="../scripts/loadComponents.js"></script>
    <script src="../scripts/blogData.js"></script>
    <script src="../scripts/copyCode.js"></script>
    <script src="../scripts/tutorialNavigation.js"></script>
    <script src="../scripts/imageTemplate.js"></script>

    <!-- YOUR TUTORIAL DATA - Define content here! -->
    <script src="../scripts/tutorialLoader.js"></script>
    <script>
        // Define your tutorial here - Just update this object!
        var tutorialData = {
            title: "Your Tutorial Title",
            published: "January 2024",
            category: "Python",
            readingTime: "10 min",
            sections: [
                {
                    title: "Introduction",
                    content: [
                        "This is paragraph 1. Use **bold text** with **double asterisks**.",
                        "This is paragraph 2. Use `inline code` with backticks."
                    ]
                },
                {
                    title: "Prerequisites",
                    list: [
                        "Item 1",
                        "Item 2",
                        "Item 3"
                    ]
                },
                {
                    title: "Code Example",
                    content: "Here's some code:",
                    code: {
                        code: "print('Hello, World!')",
                        language: "python"
                    }
                },
                {
                    title: "With Image",
                    content: "Check out this diagram:",
                    image: {
                        src: "../assets/images/3d_pose_demo.png",
                        caption: "<strong>Figure 1:</strong> Diagram caption",
                        size: "large"
                    }
                }
            ]
        };

        // This loads your content automatically
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', loadTutorialContent);
        } else {
            loadTutorialContent();
        }

        function loadTutorialContent() {
            if (!tutorialData) return;

            // Set title and metadata
            if (tutorialData.title) {
                document.title = tutorialData.title + ' - Prashanth Vangari';
                const titleEl = document.getElementById('tutorial-title');
                if (titleEl) titleEl.textContent = tutorialData.title;
            }

            const dateSpan = document.querySelector('#tutorial-date span');
            const categorySpan = document.querySelector('#tutorial-category span');
            const timeSpan = document.querySelector('#tutorial-time span');

            if (dateSpan && tutorialData.published) dateSpan.textContent = tutorialData.published;
            if (categorySpan && tutorialData.category) categorySpan.textContent = tutorialData.category;
            if (timeSpan && tutorialData.readingTime) timeSpan.textContent = tutorialData.readingTime;

            // Build content
            const container = document.getElementById('tutorial-content');
            if (!container || !tutorialData.sections) return;

            container.innerHTML = tutorialData.sections.map(section => {
                let html = `<section class="tutorial-section"><h2>${escapeHtml(section.title || '')}</h2>`;

                if (section.content) {
                    const contents = Array.isArray(section.content) ? section.content : [section.content];
                    contents.forEach(text => {
                        html += `<p>${formatText(text)}</p>`;
                    });
                }

                if (section.code) {
                    const code = typeof section.code === 'string' ? section.code : section.code.code;
                    const lang = section.code.language || 'python';
                    html += `
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-language">${lang}</span>
                                <button class="copy-btn" title="Copy code">Copy</button>
                            </div>
                            <pre><code>${escapeHtml(code)}</code></pre>
                        </div>
                    `;
                }

                if (section.image) {
                    const img = section.image;
                    html += `
                        <figure class="tutorial-image tutorial-image-${img.size || 'large'}">
                            <img src="${img.src}" alt="${escapeHtml(img.caption || '')}" class="shadow-only">
                            ${img.caption ? `<figcaption>${img.caption}</figcaption>` : ''}
                        </figure>
                    `;
                }

                if (section.list) {
                    html += `<ul class="tutorial-list">`;
                    section.list.forEach(item => {
                        html += `<li>${formatText(item)}</li>`;
                    });
                    html += `</ul>`;
                }

                html += `</section>`;
                return html;
            }).join('');

            // Re-initialize copy buttons
            setTimeout(() => {
                const copyBtns = document.querySelectorAll('.copy-btn');
                copyBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        const codeBlock = this.closest('.code-block');
                        const code = codeBlock.querySelector('code').textContent;
                        navigator.clipboard.writeText(code).then(() => {
                            this.textContent = 'Copied!';
                            setTimeout(() => this.textContent = 'Copy', 2000);
                        });
                    });
                });
            }, 100);
        }

        function formatText(text) {
            if (typeof text !== 'string') return text;
            text = text.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
            text = text.replace(/`(.+?)`/g, '<code>$1</code>');
            text = text.replace(/\[(.+?)\]\((.+?)\)/g, '<a href="$2" target="_blank">$1</a>');
            return text;
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
    </script>

</body>

</html>

